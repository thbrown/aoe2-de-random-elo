(this["webpackJsonpaoe2-de-random-elo"]=this["webpackJsonpaoe2-de-random-elo"]||[]).push([[0],{15:function(i,n,t){},17:function(i,n,t){},18:function(i,n,t){},20:function(i,n,t){"use strict";t.r(n);var e=t(1),a=t.n(e),s=t(9),r=t.n(s),d=(t(15),t(8)),g=t.n(d),o=t(10),l=t(3),c=t(4),m=t(2),h=t(6),p=t(5),u=(t.p,t(17),JSON.parse('{"language":"en","age":[{"id":0,"string":"Standard"},{"id":2,"string":"Dark Age"},{"id":3,"string":"Feudal Age"},{"id":4,"string":"Castle Age"},{"id":5,"string":"Imperial Age"},{"id":6,"string":"Post-Imperial Age"}],"civ":[{"id":0,"string":"Aztecs"},{"id":1,"string":"Berbers"},{"id":2,"string":"Britons"},{"id":3,"string":"Bulgarians"},{"id":4,"string":"Burgundians"},{"id":5,"string":"Burmese"},{"id":6,"string":"Byzantines"},{"id":7,"string":"Celts"},{"id":8,"string":"Chinese"},{"id":9,"string":"Cumans"},{"id":10,"string":"Ethiopians"},{"id":11,"string":"Franks"},{"id":12,"string":"Goths"},{"id":13,"string":"Huns"},{"id":14,"string":"Incas"},{"id":15,"string":"Indians"},{"id":16,"string":"Italians"},{"id":17,"string":"Japanese"},{"id":18,"string":"Khmer"},{"id":19,"string":"Koreans"},{"id":20,"string":"Lithuanians"},{"id":21,"string":"Magyars"},{"id":22,"string":"Malay"},{"id":23,"string":"Malians"},{"id":24,"string":"Mayans"},{"id":25,"string":"Mongols"},{"id":26,"string":"Persians"},{"id":27,"string":"Portuguese"},{"id":28,"string":"Saracens"},{"id":29,"string":"Sicilians"},{"id":30,"string":"Slavs"},{"id":31,"string":"Spanish"},{"id":32,"string":"Tatars"},{"id":33,"string":"Teutons"},{"id":34,"string":"Turks"},{"id":35,"string":"Vietnamese"},{"id":36,"string":"Vikings"}],"game_type":[{"id":0,"string":"Random Map"},{"id":1,"string":"Regicide"},{"id":2,"string":"Death Match"},{"id":3,"string":"Scenario"},{"id":6,"string":"King of the Hill"},{"id":7,"string":"Wonder Race"},{"id":8,"string":"Defend the Wonder"},{"id":9,"string":"Turbo Random Map"},{"id":10,"string":"Capture the Relic"},{"id":11,"string":"Sudden Death"},{"id":12,"string":"Battle Royale"},{"id":13,"string":"Empire Wars"}],"leaderboard":[{"id":0,"string":"Unranked"},{"id":1,"string":"1v1 Death Match"},{"id":2,"string":"Team Death Match"},{"id":3,"string":"1v1 Random Map"},{"id":4,"string":"Team Random Map"}],"map_size":[{"id":0,"string":"Tiny (2 player)"},{"id":1,"string":"Small (3 player)"},{"id":2,"string":"Medium (4 player)"},{"id":3,"string":"Normal (6 player)"},{"id":4,"string":"Large (8 player)"},{"id":5,"string":"Giant"},{"id":6,"string":"Ludicrous"}],"map_type":[{"id":9,"string":"Arabia"},{"id":10,"string":"Archipelago"},{"id":11,"string":"Baltic"},{"id":12,"string":"Black Forest"},{"id":13,"string":"Coastal"},{"id":14,"string":"Continental"},{"id":15,"string":"Crater Lake"},{"id":16,"string":"Fortress"},{"id":17,"string":"Gold Rush"},{"id":18,"string":"Highland"},{"id":19,"string":"Islands"},{"id":20,"string":"Mediterranean"},{"id":21,"string":"Migration"},{"id":22,"string":"Rivers"},{"id":23,"string":"Team Islands"},{"id":24,"string":"Full Random"},{"id":25,"string":"Scandinavia"},{"id":26,"string":"Mongolia"},{"id":27,"string":"Yucatan"},{"id":28,"string":"Salt Marsh"},{"id":29,"string":"Arena"},{"id":31,"string":"Oasis"},{"id":32,"string":"Ghost Lake"},{"id":33,"string":"Nomad"},{"id":49,"string":"Iberia"},{"id":50,"string":"Britain"},{"id":51,"string":"Mideast"},{"id":52,"string":"Texas"},{"id":53,"string":"Italy"},{"id":54,"string":"Central America"},{"id":55,"string":"France"},{"id":56,"string":"Norse Lands"},{"id":57,"string":"Sea of Japan (East Sea)"},{"id":58,"string":"Byzantium"},{"id":59,"string":"Custom"},{"id":60,"string":"Random Land Map"},{"id":62,"string":"Random Real World Map"},{"id":63,"string":"Blind Random"},{"id":65,"string":"Random Special Map"},{"id":66,"string":"Random Special Map"},{"id":67,"string":"Acropolis"},{"id":68,"string":"Budapest"},{"id":69,"string":"Cenotes"},{"id":70,"string":"City of Lakes"},{"id":71,"string":"Golden Pit"},{"id":72,"string":"Hideout"},{"id":73,"string":"Hill Fort"},{"id":74,"string":"Lombardia"},{"id":75,"string":"Steppe"},{"id":76,"string":"Valley"},{"id":77,"string":"MegaRandom"},{"id":78,"string":"Hamburger"},{"id":79,"string":"CtR Random"},{"id":80,"string":"CtR Monsoon"},{"id":81,"string":"CtR Pyramid Descent"},{"id":82,"string":"CtR Spiral"},{"id":83,"string":"Kilimanjaro"},{"id":84,"string":"Mountain Pass"},{"id":85,"string":"Nile Delta"},{"id":86,"string":"Serengeti"},{"id":87,"string":"Socotra"},{"id":88,"string":"Amazon"},{"id":89,"string":"China"},{"id":90,"string":"Horn of Africa"},{"id":91,"string":"India"},{"id":92,"string":"Madagascar"},{"id":93,"string":"West Africa"},{"id":94,"string":"Bohemia"},{"id":95,"string":"Earth"},{"id":96,"string":"Canyons"},{"id":97,"string":"Enemy Archipelago"},{"id":98,"string":"Enemy Islands"},{"id":99,"string":"Far Out"},{"id":100,"string":"Front Line"},{"id":101,"string":"Inner Circle"},{"id":102,"string":"Motherland"},{"id":103,"string":"Open Plains"},{"id":104,"string":"Ring of Water"},{"id":105,"string":"Snakepit"},{"id":106,"string":"The Eye"},{"id":107,"string":"Australia"},{"id":108,"string":"Indochina"},{"id":109,"string":"Indonesia"},{"id":110,"string":"Strait of Malacca"},{"id":111,"string":"Philippines"},{"id":112,"string":"Bog Islands"},{"id":113,"string":"Mangrove Jungle"},{"id":114,"string":"Pacific Islands"},{"id":115,"string":"Sandbank"},{"id":116,"string":"Water Nomad"},{"id":117,"string":"Jungle Islands"},{"id":118,"string":"Holy Line"},{"id":119,"string":"Border Stones"},{"id":120,"string":"Yin Yang"},{"id":121,"string":"Jungle Lanes"},{"id":122,"string":"Alpine Lakes"},{"id":123,"string":"Bogland"},{"id":124,"string":"Mountain Ridge"},{"id":125,"string":"Ravines"},{"id":126,"string":"Wolf Hill"},{"id":132,"string":"Antarctica"},{"id":137,"string":"Custom Map Pool"},{"id":139,"string":"Golden Swamp"},{"id":140,"string":"Four Lakes"},{"id":141,"string":"Land Nomad"},{"id":142,"string":"BR Battle On Ice"},{"id":143,"string":"BR El Dorado"},{"id":144,"string":"BR Fall of Axum"},{"id":145,"string":"BR Fall of Rome"},{"id":146,"string":"BR Majapahit Empire"},{"id":147,"string":"Amazon Tunnel"},{"id":148,"string":"Coastal Forest"},{"id":149,"string":"African Clearing"},{"id":150,"string":"Atacama"},{"id":151,"string":"Seize the Mountain"}],"rating_type":[{"id":0,"string":"Unranked"},{"id":1,"string":"1v1 Death Match"},{"id":2,"string":"1v1 Random Map"},{"id":3,"string":"Team Death Match"},{"id":4,"string":"Team Random Map"},{"id":5,"string":"1v1 Random Map Quick Play"},{"id":6,"string":"Team Random Map Quick Play"},{"id":7,"string":"1v1 Empire Wars Quick Play"},{"id":8,"string":"Team Empire Wars Quick Play"},{"id":9,"string":"Battle Royale Quick Play"}],"resources":[{"id":0,"string":"Standard"},{"id":1,"string":"Low"},{"id":2,"string":"Medium"},{"id":3,"string":"High"},{"id":4,"string":"Ultra High"},{"id":5,"string":"Infinite"},{"id":6,"string":"Random"}],"speed":[{"id":0,"string":"Slow"},{"id":1,"string":"Casual"},{"id":2,"string":"Normal"},{"id":3,"string":"Fast"}],"victory":[{"id":1,"string":"Conquest"},{"id":7,"string":"Time Limit"},{"id":8,"string":"Score"},{"id":9,"string":"Standard"},{"id":11,"string":"Last Man Standing"}],"visibility":[{"id":0,"string":"Normal"},{"id":1,"string":"Explored"},{"id":2,"string":"All Visible"}]}')),j=function(){function i(){Object(l.a)(this,i)}return Object(c.a)(i,null,[{key:"getCivLabel",value:function(i){var n=u.civ.filter((function(n){return n.id===i}));return 1===n.length?n[0].string:null}},{key:"getMapLabel",value:function(i){var n=u.map_type.filter((function(n){return n.id===i}));return 1===n.length?n[0].string:null}}]),i}(),b=(t(18),t(0)),y=function(i){Object(h.a)(t,i);var n=Object(p.a)(t);function t(i){var e;return Object(l.a)(this,t),(e=n.call(this)).toggleRatings=function(i){var n=document.getElementById("ratings"),t=document.getElementById("ratingsToggleButton");n.classList.contains("none")?(n.classList.remove("none"),t.innerText="Hide Ratings"):(n.classList.add("none"),t.innerText="Unhide Ratings")}.bind(Object(m.a)(e)),e}return Object(c.a)(t,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("div",{className:"matchContainer",children:[Object(b.jsx)("div",{children:Object(b.jsxs)("table",{children:[Object(b.jsx)("tr",{children:Object(b.jsx)("td",{colSpan:"3",children:Object(b.jsx)("h3",{className:"mapName",children:this.props.map})})}),Object(b.jsxs)("tr",{children:[Object(b.jsxs)("td",{children:[this.props.playerOneCiv," - ",this.props.playerOneName]}),Object(b.jsx)("td",{children:"vs."}),Object(b.jsxs)("td",{children:[this.props.playerTwoCiv," - ",this.props.playerTwoName]})]}),Object(b.jsxs)("tr",{id:"ratings",className:"none",children:[Object(b.jsx)("td",{children:this.props.playerOneRating}),Object(b.jsx)("td",{}),Object(b.jsx)("td",{children:this.props.playerTwoRating})]})]})}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"smallButton",children:Object(b.jsx)("a",{className:"spectateGame",href:"https://aoe2.net/s/".concat(this.props.matchId),children:"Spectate in DE"})}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{id:"ratingsToggleButton",className:"smallButton",onClick:this.toggleRatings,children:"Unhide Ratings"})})]})]})})}}]),t}(e.Component),O=function(i){Object(h.a)(t,i);var n=Object(p.a)(t);function t(i){var e;return Object(l.a)(this,t),(e=n.call(this)).state={minRating:500,maxRating:2e3,selectedMatches:[]},e.handleMinRatingChange=function(i){this.setState({minRating:i.target.value})}.bind(Object(m.a)(e)),e.handleMaxRatingChange=function(i){this.setState({maxRating:i.target.value})}.bind(Object(m.a)(e)),e.onRandomClick=Object(o.a)(g.a.mark((function i(){var n,t,e,a,s,r,d,o,l,c,m,h,p,u,b,y,O,R,x,f,M,C;return g.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=parseInt(this.state.minRating),t=parseInt(this.state.maxRating),e=v(n,t),console.log("Targeting",e),!(n>t)){i.next=7;break}return alert("Invalid input, min is larger than max"),i.abrupt("return");case 7:return document.getElementById("loading-hider").classList.add("none"),document.getElementById("loading").classList.remove("none"),i.next=11,fetch("https://us-central1-age-of-empires-307521.cloudfunctions.net/aoe2-net-cors-proxy",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({query:"matches?game=aoe2de&count=".concat(500,"&since=").concat(Math.round((new Date).getTime()/1e3)-1e3)})});case 11:return a=i.sent,i.next=14,a.json();case 14:for(s=i.sent,console.log(s),r=[],d=0;d<s.length;d++)o=s[d],3===o.leaderboard_id&&(l=o.match_id,c=o.players[0].name,m=o.players[1].name,h=j.getCivLabel(o.players[0].civ),p=j.getCivLabel(o.players[1].civ),u=o.players[0].rating,b=o.players[1].rating,y=j.getMapLabel(o.map_type),O=void 0,O=b||u?b&&u?(b+u)/2:b?u:b:"none",r.push({avgRating:O,map:y,playerOneRating:u,playerTwoRating:b,matchId:l,playerOneName:c,playerTwoName:m,playerOneCiv:h,playerTwoCiv:p}));for(console.log("FILTERED",r),x=99999999,f=0;f<r.length;f++)(M=r[f]).avgRating&&(C=Math.abs(e-M.avgRating))<x&&(R=M,x=C);console.log("Selected",R),this.setState({selectedMatches:[R]}),document.getElementById("loading-hider").classList.remove("none"),document.getElementById("loading").classList.add("none");case 25:case"end":return i.stop()}}),i,this)}))).bind(Object(m.a)(e)),e}return Object(c.a)(t,[{key:"render",value:function(){for(var i=[],n=0;n<this.state.selectedMatches.length;n++){var t=this.state.selectedMatches[n];i.push(Object(b.jsx)(y,{matchId:t.matchId,playerOneName:t.playerOneName,playerTwoName:t.playerTwoName,playerOneCiv:t.playerOneCiv,playerTwoCiv:t.playerTwoCiv,playerOneRating:t.playerOneRating,playerTwoRating:t.playerTwoRating,map:t.map},n+"selected-match"))}return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[Object(b.jsx)("h1",{children:"Age of Empires 2: DE"}),Object(b.jsx)("h2",{children:"Random Rating Match Retriever"}),Object(b.jsx)("div",{children:'Playing guess the elo? Selecting a "random" game from the ongoing matches won\'t get you a very even distribution of ratings.'}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{children:["This tool:",Object(b.jsx)("br",{})," 1. Selects a random rating between two values (500 and 2000 by default).",Object(b.jsx)("br",{})," 2. Then selects the closest ongoing game to that rating."]}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"optionsPane",children:[Object(b.jsx)("label",{for:"minRating",children:"Min Rating"}),Object(b.jsx)("input",{type:"number",id:"minRating",name:"minRating",step:"1",value:this.state.minRating,onChange:this.handleMinRatingChange}),Object(b.jsx)("label",{for:"maxRating",children:"Max Rating"}),Object(b.jsx)("input",{type:"number",id:"maxRating",name:"maxRating",step:"1",value:this.state.maxRating,onChange:this.handleMaxRatingChange})]}),Object(b.jsxs)("button",{className:"button",style:{width:"300px"},onClick:this.onRandomClick,children:[Object(b.jsx)("div",{id:"loading",style:{zIndex:1,margin:"auto",width:"8%",marginTop:"0px"},className:"none",children:Object(b.jsxs)("div",{className:"loading-spinner",children:[Object(b.jsx)("div",{className:"spinner-dot"}),Object(b.jsx)("div",{className:"spinner-dot"}),Object(b.jsx)("div",{className:"spinner-dot"}),Object(b.jsx)("div",{className:"spinner-dot"}),Object(b.jsx)("div",{className:"spinner-dot"}),Object(b.jsx)("div",{className:"spinner-dot"})]})}),Object(b.jsx)("div",{id:"loading-hider",children:"Get Match With Random Rating"})]}),Object(b.jsx)("br",{}),i]})})}}]),t}(e.Component),v=function(i,n){return Math.round(Math.random()*(n-i)+i)},R=function(i){i&&i instanceof Function&&t.e(3).then(t.bind(null,21)).then((function(n){var t=n.getCLS,e=n.getFID,a=n.getFCP,s=n.getLCP,r=n.getTTFB;t(i),e(i),a(i),s(i),r(i)}))};r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root")),R()}},[[20,1,2]]]);
//# sourceMappingURL=main.031b687a.chunk.js.map