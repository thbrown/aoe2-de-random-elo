(this["webpackJsonpaoe2-de-random-elo"]=this["webpackJsonpaoe2-de-random-elo"]||[]).push([[0],{15:function(i,t,e){},17:function(i,t,e){},18:function(i,t,e){},20:function(i,t,e){"use strict";e.r(t);var n=e(2),s=e.n(n),a=e(9),r=e.n(a),d=(e(15),e(8)),g=e.n(d),o=e(10),c=e(3),l=e(4),h=e(1),p=e(6),m=e(5),u=(e(17),JSON.parse('{"language":"en","age":[{"id":0,"string":"Standard"},{"id":2,"string":"Dark Age"},{"id":3,"string":"Feudal Age"},{"id":4,"string":"Castle Age"},{"id":5,"string":"Imperial Age"},{"id":6,"string":"Post-Imperial Age"}],"civ":[{"id":1,"string":"Britons"},{"id":2,"string":"Franks"},{"id":3,"string":"Goths"},{"id":4,"string":"Teutons"},{"id":5,"string":"Japanese"},{"id":6,"string":"Chinese"},{"id":7,"string":"Byzantines"},{"id":8,"string":"Persians"},{"id":9,"string":"Saracens"},{"id":10,"string":"Turks"},{"id":11,"string":"Vikings"},{"id":12,"string":"Mongols"},{"id":13,"string":"Celts"},{"id":14,"string":"Spanish"},{"id":15,"string":"Aztecs"},{"id":16,"string":"Mayans"},{"id":17,"string":"Huns"},{"id":18,"string":"Koreans"},{"id":19,"string":"Italians"},{"id":20,"string":"Indians"},{"id":21,"string":"Incas"},{"id":22,"string":"Magyars"},{"id":23,"string":"Slavs"},{"id":24,"string":"Portuguese"},{"id":25,"string":"Ethiopians"},{"id":26,"string":"Malians"},{"id":27,"string":"Berbers"},{"id":28,"string":"Khmer"},{"id":29,"string":"Malay"},{"id":30,"string":"Burmese"},{"id":31,"string":"Vietnamese"},{"id":32,"string":"Bulgarians"},{"id":33,"string":"Tatars"},{"id":34,"string":"Cumans"},{"id":35,"string":"Lithuanians"},{"id":36,"string":"Burgundians"},{"id":37,"string":"Sicilians"},{"id":38,"string":"Poles"},{"id":39,"string":"Bohemians"}],"game_type":[{"id":0,"string":"Random Map"},{"id":1,"string":"Regicide"},{"id":2,"string":"Death Match"},{"id":3,"string":"Scenario"},{"id":6,"string":"King of the Hill"},{"id":7,"string":"Wonder Race"},{"id":8,"string":"Defend the Wonder"},{"id":9,"string":"Turbo Random Map"},{"id":10,"string":"Capture the Relic"},{"id":11,"string":"Sudden Death"},{"id":12,"string":"Battle Royale"},{"id":13,"string":"Empire Wars"},{"id":15,"string":"Co-Op Campaign"}],"leaderboard":[{"id":0,"string":"Unranked"},{"id":1,"string":"1v1 Death Match"},{"id":2,"string":"Team Death Match"},{"id":3,"string":"1v1 Random Map"},{"id":4,"string":"Team Random Map"},{"id":13,"string":"1v1 Empire Wars"},{"id":14,"string":"Team Empire Wars"}],"map_size":[{"id":0,"string":"Tiny (2 player)"},{"id":1,"string":"Small (3 player)"},{"id":2,"string":"Medium (4 player)"},{"id":3,"string":"Normal (6 player)"},{"id":4,"string":"Large (8 player)"},{"id":5,"string":"Giant"},{"id":6,"string":"Ludicrous"}],"map_type":[{"id":9,"string":"Arabia"},{"id":10,"string":"Archipelago"},{"id":11,"string":"Baltic"},{"id":12,"string":"Black Forest"},{"id":13,"string":"Coastal"},{"id":14,"string":"Continental"},{"id":15,"string":"Crater Lake"},{"id":16,"string":"Fortress"},{"id":17,"string":"Gold Rush"},{"id":18,"string":"Highland"},{"id":19,"string":"Islands"},{"id":20,"string":"Mediterranean"},{"id":21,"string":"Migration"},{"id":22,"string":"Rivers"},{"id":23,"string":"Team Islands"},{"id":24,"string":"Full Random"},{"id":25,"string":"Scandinavia"},{"id":26,"string":"Mongolia"},{"id":27,"string":"Yucatan"},{"id":28,"string":"Salt Marsh"},{"id":29,"string":"Arena"},{"id":31,"string":"Oasis"},{"id":32,"string":"Ghost Lake"},{"id":33,"string":"Nomad"},{"id":49,"string":"Iberia"},{"id":50,"string":"Britain"},{"id":51,"string":"Mideast"},{"id":52,"string":"Texas"},{"id":53,"string":"Italy"},{"id":54,"string":"Central America"},{"id":55,"string":"France"},{"id":56,"string":"Norse Lands"},{"id":57,"string":"Sea of Japan (East Sea)"},{"id":58,"string":"Byzantium"},{"id":59,"string":"Custom"},{"id":60,"string":"Random Land Map"},{"id":62,"string":"Random Real World Map"},{"id":63,"string":"Blind Random"},{"id":65,"string":"Random Special Map"},{"id":66,"string":"Random Special Map"},{"id":67,"string":"Acropolis"},{"id":68,"string":"Budapest"},{"id":69,"string":"Cenotes"},{"id":70,"string":"City of Lakes"},{"id":71,"string":"Golden Pit"},{"id":72,"string":"Hideout"},{"id":73,"string":"Hill Fort"},{"id":74,"string":"Lombardia"},{"id":75,"string":"Steppe"},{"id":76,"string":"Valley"},{"id":77,"string":"MegaRandom"},{"id":78,"string":"Hamburger"},{"id":79,"string":"CtR Random"},{"id":80,"string":"CtR Monsoon"},{"id":81,"string":"CtR Pyramid Descent"},{"id":82,"string":"CtR Spiral"},{"id":83,"string":"Kilimanjaro"},{"id":84,"string":"Mountain Pass"},{"id":85,"string":"Nile Delta"},{"id":86,"string":"Serengeti"},{"id":87,"string":"Socotra"},{"id":88,"string":"Amazon"},{"id":89,"string":"China"},{"id":90,"string":"Horn of Africa"},{"id":91,"string":"India"},{"id":92,"string":"Madagascar"},{"id":93,"string":"West Africa"},{"id":94,"string":"Bohemia"},{"id":95,"string":"Earth"},{"id":96,"string":"Canyons"},{"id":97,"string":"Enemy Archipelago"},{"id":98,"string":"Enemy Islands"},{"id":99,"string":"Far Out"},{"id":100,"string":"Front Line"},{"id":101,"string":"Inner Circle"},{"id":102,"string":"Motherland"},{"id":103,"string":"Open Plains"},{"id":104,"string":"Ring of Water"},{"id":105,"string":"Snakepit"},{"id":106,"string":"The Eye"},{"id":107,"string":"Australia"},{"id":108,"string":"Indochina"},{"id":109,"string":"Indonesia"},{"id":110,"string":"Strait of Malacca"},{"id":111,"string":"Philippines"},{"id":112,"string":"Bog Islands"},{"id":113,"string":"Mangrove Jungle"},{"id":114,"string":"Pacific Islands"},{"id":115,"string":"Sandbank"},{"id":116,"string":"Water Nomad"},{"id":117,"string":"Jungle Islands"},{"id":118,"string":"Holy Line"},{"id":119,"string":"Border Stones"},{"id":120,"string":"Yin Yang"},{"id":121,"string":"Jungle Lanes"},{"id":122,"string":"Alpine Lakes"},{"id":123,"string":"Bogland"},{"id":124,"string":"Mountain Ridge"},{"id":125,"string":"Ravines"},{"id":126,"string":"Wolf Hill"},{"id":132,"string":"Antarctica"},{"id":133,"string":"Aral Sea"},{"id":134,"string":"Black Sea"},{"id":135,"string":"Caucasus"},{"id":136,"string":"Caucasus"},{"id":137,"string":"Custom Map Pool"},{"id":138,"string":"Custom Map Pool"},{"id":139,"string":"Golden Swamp"},{"id":140,"string":"Four Lakes"},{"id":141,"string":"Land Nomad"},{"id":142,"string":"BR Battle On Ice"},{"id":143,"string":"BR El Dorado"},{"id":144,"string":"BR Fall of Axum"},{"id":145,"string":"BR Fall of Rome"},{"id":146,"string":"BR Majapahit Empire"},{"id":147,"string":"Amazon Tunnel"},{"id":148,"string":"Coastal Forest"},{"id":149,"string":"African Clearing"},{"id":150,"string":"Atacama"},{"id":151,"string":"Seize the Mountain"},{"id":152,"string":"Crater"},{"id":153,"string":"Crossroads"},{"id":154,"string":"Michi"},{"id":155,"string":"Team Moats"},{"id":156,"string":"Volcanic Island"},{"id":157,"string":"Acclivity"},{"id":158,"string":"Eruption"},{"id":159,"string":"Frigid Lake"},{"id":160,"string":"Greenland"},{"id":161,"string":"Lowland"},{"id":162,"string":"Marketplace"},{"id":163,"string":"Meadow"},{"id":164,"string":"Mountain Range"},{"id":165,"string":"Northern Isles"},{"id":166,"string":"Ring Fortress"},{"id":167,"string":"Runestones"}],"rating_type":[{"id":0,"string":"Unranked"},{"id":1,"string":"1v1 Death Match"},{"id":2,"string":"1v1 Random Map"},{"id":3,"string":"Team Death Match"},{"id":4,"string":"Team Random Map"},{"id":5,"string":"1v1 Random Map Quick Play"},{"id":6,"string":"Team Random Map Quick Play"},{"id":7,"string":"1v1 Empire Wars Quick Play"},{"id":8,"string":"Team Empire Wars Quick Play"},{"id":9,"string":"Battle Royale Quick Play"},{"id":13,"string":"1v1 Empire Wars"},{"id":14,"string":"Team Empire Wars"}],"resources":[{"id":0,"string":"Standard"},{"id":1,"string":"Low"},{"id":2,"string":"Medium"},{"id":3,"string":"High"},{"id":4,"string":"Ultra High"},{"id":5,"string":"Infinite"},{"id":6,"string":"Random"}],"speed":[{"id":0,"string":"Slow"},{"id":1,"string":"Casual"},{"id":2,"string":"Normal"},{"id":3,"string":"Fast"}],"victory":[{"id":1,"string":"Conquest"},{"id":7,"string":"Time Limit"},{"id":8,"string":"Score"},{"id":9,"string":"Standard"},{"id":11,"string":"Last Man Standing"}],"visibility":[{"id":0,"string":"Normal"},{"id":1,"string":"Explored"},{"id":2,"string":"All Visible"}]}')),b=function(){function i(){Object(c.a)(this,i)}return Object(l.a)(i,null,[{key:"getCivLabel",value:function(i){var t=u.civ.filter((function(t){return t.id===i}));return 1===t.length?t[0].string:null}},{key:"getMapLabel",value:function(i){var t=u.map_type.filter((function(t){return t.id===i}));return 1===t.length?t[0].string:null}}]),i}(),j=(e(18),e(0)),O=function(i){Object(p.a)(e,i);var t=Object(m.a)(e);function e(i){var n;return Object(c.a)(this,e),(n=t.call(this)).state={showRatings:!1},n.toggleRatings=function(i){this.state.showRatings?this.setState({showRatings:!1}):this.setState({showRatings:!0})}.bind(Object(h.a)(n)),n}return Object(l.a)(e,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"match-container",children:[Object(j.jsxs)("div",{className:"match-info-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)("h3",{className:"map-name",children:this.props.map})}),Object(j.jsxs)("div",{className:"both-player-container",children:[Object(j.jsxs)("div",{className:"player-container",children:[Object(j.jsxs)("div",{className:"player-name-container",children:[Object(j.jsx)("img",{className:"civ-logo",alt:this.props.playerOneCiv,title:this.props.playerOneCiv,src:"https://thbrown.github.io/aoe2-de-random-elo/civs/"+this.props.playerOneCiv.toLowerCase()+".png"}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"https://aoe2.net/#profile-".concat(this.props.playerOneId),children:this.props.playerOneName})})]}),Object(j.jsx)("div",{className:"ratings-container "+(this.state.showRatings?"":"hidden"),children:this.props.playerOneRating})]}),Object(j.jsx)("div",{className:"versus",children:"vs."}),Object(j.jsxs)("div",{className:"player-container",children:[Object(j.jsxs)("div",{className:"player-name-container",children:[Object(j.jsx)("img",{className:"civ-logo",alt:this.props.playerTwoCiv,title:this.props.playerTwoCiv,src:"https://thbrown.github.io/aoe2-de-random-elo/civs/"+this.props.playerTwoCiv.toLowerCase()+".png"}),Object(j.jsx)("div",{children:Object(j.jsx)("a",{href:"https://aoe2.net/#profile-".concat(this.props.playerTwoId),children:this.props.playerTwoName})})]}),Object(j.jsx)("div",{className:"ratings-container "+(this.state.showRatings?"":"hidden"),children:this.props.playerTwoRating})]})]})]}),Object(j.jsxs)("div",{className:"match-button-container",children:[Object(j.jsx)("div",{children:Object(j.jsx)("a",{className:"spectate-game button match-option-button",href:"https://aoe2.net/s/".concat(this.props.matchId),children:"Spectate in DE"})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{style:{width:"122px"},className:"button match-option-button",onClick:this.toggleRatings,children:this.state.showRatings?"Hide Ratings":"Unhide Ratings"})})]})]})})}}]),e}(n.Component),v=function(i){Object(p.a)(e,i);var t=Object(m.a)(e);function e(i){var n;return Object(c.a)(this,e),(n=t.call(this)).state={minRating:500,maxRating:2e3,numberOfMatches:5,selectedMatches:[]},n.handleMinRatingChange=function(i){this.setState({minRating:i.target.value})}.bind(Object(h.a)(n)),n.handleMaxRatingChange=function(i){this.setState({maxRating:i.target.value})}.bind(Object(h.a)(n)),n.handleNumberOfMatchesChange=function(i){this.setState({numberOfMatches:i.target.value})}.bind(Object(h.a)(n)),n.onRandomClick=Object(o.a)(g.a.mark((function i(){var t,e,n,s,a,r,d,o,c,l,h,p,m,u,j,O,v,f,x,R,M,C,w,N,S,I,T;return g.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,t=parseInt(this.state.minRating),e=parseInt(this.state.maxRating),!(parseInt(this.state.numMatches)<1)){i.next=6;break}return i.abrupt("return");case 6:for(n=[],console.log("Number of matches",this.state.numberOfMatches),s=0;s<this.state.numberOfMatches;s++)n.push(y(t,e));if(console.log("Target Ratings",n),!(t>e)){i.next=13;break}return alert("Invalid input, min is larger than max"),i.abrupt("return");case 13:return document.getElementById("loading-hider").classList.add("none"),document.getElementById("loading").classList.remove("none"),i.next=17,fetch("https://us-central1-age-of-empires-307521.cloudfunctions.net/aoe2-net-cors-proxy",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({query:"matches?game=aoe2de&count=".concat(500,"&since=").concat(Math.round((new Date).getTime()/1e3)-1e3)})});case 17:return a=i.sent,i.next=20,a.json();case 20:for(r=i.sent,console.log(r),d=[],o=0;o<r.length;o++)c=r[o],3===c.leaderboard_id&&(l=c.match_id,h=c.players[0].name,p=c.players[1].name,m=c.players[0].profile_id,u=c.players[1].profile_id,j=b.getCivLabel(c.players[0].civ),O=b.getCivLabel(c.players[1].civ),v=c.players[0].rating,f=c.players[1].rating,x=b.getMapLabel(c.map_type),R=void 0,R=f||v?f&&v?(f+v)/2:f?v:f:"none",d.push({avgRating:R,map:x,playerOneRating:v,playerTwoRating:f,matchId:l,playerOneName:h,playerTwoName:p,playerOneCiv:j,playerTwoCiv:O,playerOneId:m,playerTwoId:u}));for(console.log("Filtered Matches (Ranked 1v1 Only)",d),M=[],C=0;C<n.length;C++){for(w=void 0,N=99999999,S=0;S<d.length;S++)(I=d[S]).avgRating&&(T=Math.abs(n[C]-I.avgRating))<N&&(w=I,N=T);M.push(w)}console.log("Selected",M),this.setState({selectedMatches:M}),i.next=35;break;case 31:i.prev=31,i.t0=i.catch(0),console.log(i.t0),alert("Sorry, there was an error while attempting to get data from aoe2.net");case 35:return i.prev=35,document.getElementById("loading-hider").classList.remove("none"),document.getElementById("loading").classList.add("none"),i.finish(35);case 39:case"end":return i.stop()}}),i,this,[[0,31,35,39]])}))).bind(Object(h.a)(n)),n}return Object(l.a)(e,[{key:"render",value:function(){for(var i=[],t=0;t<this.state.selectedMatches.length;t++){var e=this.state.selectedMatches[t];i.push(Object(j.jsx)(O,{matchId:e.matchId,playerOneName:e.playerOneName,playerTwoName:e.playerTwoName,playerOneCiv:e.playerOneCiv,playerTwoCiv:e.playerTwoCiv,playerOneRating:e.playerOneRating,playerTwoRating:e.playerTwoRating,playerOneId:e.playerOneId,playerTwoId:e.playerTwoId,map:e.map},t+"selected-match"))}return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto"},children:[Object(j.jsx)("h1",{children:"Age of Empires 2: DE"}),Object(j.jsx)("h2",{children:"Random Rating Match Retriever"}),Object(j.jsx)("div",{children:'Playing guess the elo? Selecting a "random" game from the ongoing matches won\'t get you a very even distribution of ratings.'}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{children:["This tool:",Object(j.jsx)("br",{})," 1. Selects a random rating between two values.",Object(j.jsx)("br",{})," 2. Then selects the closest ongoing game to that rating."]}),Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"options-pane",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("label",{for:"minRating",children:"Min Rating"})}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",id:"minRating",name:"minRating",step:"1",value:this.state.minRating,onChange:this.handleMinRatingChange})})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("label",{for:"maxRating",children:"Max Rating"})}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",id:"maxRating",name:"maxRating",step:"1",value:this.state.maxRating,onChange:this.handleMaxRatingChange})})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("label",{for:"numberOfMatches",children:"# of Results"})}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{type:"number",id:"numberOfMatches",name:"numberOfMatches",step:"1",max:"500",min:"1",value:this.state.numberOfMatches,onChange:this.handleNumberOfMatchesChange})})]})]}),Object(j.jsxs)("button",{className:"big-button button",onClick:this.onRandomClick,children:[Object(j.jsx)("div",{id:"loading",className:"outer-loading-spinner none",children:Object(j.jsxs)("div",{className:"loading-spinner",children:[Object(j.jsx)("div",{className:"spinner-dot"}),Object(j.jsx)("div",{className:"spinner-dot"}),Object(j.jsx)("div",{className:"spinner-dot"}),Object(j.jsx)("div",{className:"spinner-dot"}),Object(j.jsx)("div",{className:"spinner-dot"}),Object(j.jsx)("div",{className:"spinner-dot"})]})}),Object(j.jsxs)("div",{id:"loading-hider",children:["Get Match","1"==this.state.numberOfMatches?"":"es"]})]}),Object(j.jsx)("br",{}),i,Object(j.jsx)("br",{}),Object(j.jsxs)("div",{className:"footer",children:["View source code on"," ",Object(j.jsx)("a",{href:"https://github.com/thbrown/aoe2-de-random-elo",children:"github"}),Object(j.jsx)("br",{}),"Data from ",Object(j.jsx)("a",{href:"https://aoe2.net/#api",children:"https://aoe2.net/#api"}),Object(j.jsx)("br",{}),Object(j.jsx)("br",{}),"Age of Empires II: Definitive Edition\xa9 Microsoft Corporation. This site was created under Microsoft's"," ",Object(j.jsx)("a",{href:"https://www.xbox.com/en-US/developers/rules",children:'"Game Content Usage Rules"'})," ","using assets from Age of Empires II: Definitive Edition, and it is not endorsed by or affiliated with Microsoft."]})]})})}}]),e}(n.Component),y=function(i,t){return Math.round(Math.random()*(t-i)+i)},f=function(i){i&&i instanceof Function&&e.e(3).then(e.bind(null,21)).then((function(t){var e=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;e(i),n(i),s(i),a(i),r(i)}))};r.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root")),f()}},[[20,1,2]]]);
//# sourceMappingURL=main.2fbe205b.chunk.js.map